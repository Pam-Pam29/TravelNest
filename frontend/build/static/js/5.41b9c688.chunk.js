(this["webpackJsonptravenest-frontend"]=this["webpackJsonptravenest-frontend"]||[]).push([[5],{39:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var s=a(47),i=a(14);const c=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FIREBASE_API_KEY:"AIzaSyDJD_cmuOzC-yOdbcRV5BZGXykTwSx9gCk",REACT_APP_FIREBASE_AUTH_DOMAIN:"travenest-97367.firebaseapp.com",REACT_APP_FIREBASE_PROJECT_ID:"travenest-97367"}).REACT_APP_API_URL||"http://localhost:5000/api",r={async createBooking(e){const t=i.a.getToken();return(await s.a.post(`${c}/bookings, bookingData`,{headers:{Authorization:`Bearer ${t}`}})).data},async getUserBookings(){const e=i.a.getToken();return(await s.a.get(`${c}api/bookings`,{headers:{Authorization:`Bearer ${e}`}})).data},async cancelBooking(e){const t=i.a.getToken();return(await s.a.patch(`${c}/bookings/${e}/cancel`,{},{headers:{Authorization:`Bearer ${t}`}})).data}}},48:function(e,t,a){"use strict";a.r(t);var s=a(0),i=a(3),c=a(18),r=a(10);const n={async getAllPackages(){try{const e=Object(c.b)(r.b,"packages");return(await Object(c.e)(e)).docs.map((e=>{const t=e.data();return{_id:e.id,title:t.title||"",description:t.description||"",price:t.price||0,duration:t.duration||0,destinations:t.destinations||[],availability:t.availability||0,images:t.images||[],includedServices:t.includedServices||[]}}))}catch(e){throw console.error("Error fetching packages",e),e}},async getPackageById(e){try{const t=Object(c.c)(r.b,"packages",e),a=await Object(c.d)(t);if(!a.exists())throw new Error("Package not found");const s=a.data();return{_id:a.id,title:s.title||"",description:s.description||"",price:s.price||0,duration:s.duration||0,destinations:s.destinations||[],availability:s.availability||0,images:s.images||[],includedServices:s.includedServices||[]}}catch(t){throw console.error("Error fetching package",t),t}},async createPackage(e){try{return(await Object(c.a)(Object(c.b)(r.b,"packages"),{title:e.title,description:e.description,price:e.price,duration:e.duration,destinations:e.destinations,availability:e.availability,images:e.images,includedServices:e.includedServices})).id}catch(t){throw console.error("Error creating package",t),t}}};var l=a(39),o=a(5);t.default=()=>{const[e,t]=Object(s.useState)(null),[a,c]=Object(s.useState)(!0),[r,d]=Object(s.useState)(""),[b,j]=Object(s.useState)(1),[m,u]=Object(s.useState)(""),{id:h}=Object(i.s)(),x=Object(i.q)(),v=Object(s.useCallback)((async()=>{if(!h)return d("No package ID provided"),void c(!1);try{const e=await n.getPackageById(h);t(e),c(!1)}catch(e){d("Failed to fetch package details"),c(!1),console.error(e)}}),[h]);Object(s.useEffect)((()=>{v()}),[v]);return a?Object(o.jsx)("div",{className:"text-center py-10",children:"Loading package details..."}):r?Object(o.jsx)("div",{className:"text-red-500 text-center py-10",children:r}):e?Object(o.jsx)("div",{className:"container mx-auto px-4 py-8",children:Object(o.jsxs)("div",{className:"grid md:grid-cols-2 gap-8",children:[Object(o.jsx)("div",{children:e.images&&e.images.length>0?Object(o.jsx)("img",{src:e.images[0],alt:e.title,className:"w-full h-96 object-cover rounded-lg shadow-md"}):Object(o.jsx)("div",{className:"w-full h-96 bg-gray-200 flex items-center justify-center",children:"No Image Available"})}),Object(o.jsxs)("div",{children:[Object(o.jsx)("h1",{className:"text-3xl font-bold mb-4",children:e.title}),Object(o.jsxs)("div",{className:"mb-6",children:[Object(o.jsx)("p",{className:"text-gray-600 mb-4",children:e.description}),Object(o.jsxs)("div",{className:"space-y-2",children:[Object(o.jsxs)("div",{className:"flex items-center",children:[Object(o.jsxs)("svg",{className:"w-5 h-5 mr-2 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[Object(o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),Object(o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),Object(o.jsxs)("span",{children:["Destinations: ",e.destinations.join(", ")]})]}),Object(o.jsxs)("div",{className:"flex items-center",children:[Object(o.jsx)("svg",{className:"w-5 h-5 mr-2 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:Object(o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),Object(o.jsxs)("span",{children:["Duration: ",e.duration," days"]})]}),Object(o.jsxs)("div",{className:"flex items-center",children:[Object(o.jsx)("svg",{className:"w-5 h-5 mr-2 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:Object(o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),Object(o.jsxs)("span",{children:["Price: $",e.price.toFixed(2)]})]}),Object(o.jsxs)("div",{className:"flex items-center",children:[Object(o.jsx)("svg",{className:"w-5 h-5 mr-2 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:Object(o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z"})}),Object(o.jsxs)("span",{children:["Availability: ",e.availability," spots left"]})]})]})]}),Object(o.jsxs)("div",{className:"mt-6",children:[Object(o.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Book Your Trip"}),Object(o.jsxs)("div",{className:"flex items-center mb-4",children:[Object(o.jsx)("label",{htmlFor:"travelers",className:"mr-4",children:"Number of Travelers:"}),Object(o.jsx)("input",{type:"number",id:"travelers",min:"1",max:e.availability,value:b,onChange:e=>j(Number(e.target.value)),className:"w-20 border rounded px-2 py-1"})]}),Object(o.jsxs)("div",{className:"flex items-center mb-4",children:[Object(o.jsx)("span",{className:"mr-4",children:"Total Price:"}),Object(o.jsxs)("span",{className:"font-bold text-blue-600",children:["$",(e.price*b).toFixed(2)]})]}),m&&Object(o.jsx)("div",{className:"text-red-500 mb-4",children:m}),Object(o.jsx)("button",{onClick:async()=>{if(h)try{await l.a.createBooking({packageId:h,travelDate:new Date,numberOfTravelers:b});x("/dashboard")}catch(a){var e,t;u((null===(e=a.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||"Booking failed"),console.error(a)}else u("Invalid package")},disabled:e.availability<b,className:"w-full py-3 rounded text-white font-semibold "+(e.availability<b?"bg-gray-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700"),children:e.availability<b?"Not Enough Availability":"Book Now"})]}),e.includedServices&&e.includedServices.length>0&&Object(o.jsxs)("div",{className:"mt-8",children:[Object(o.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Included Services"}),Object(o.jsx)("ul",{className:"list-disc list-inside",children:e.includedServices.map(((e,t)=>Object(o.jsx)("li",{className:"text-gray-600",children:e},t)))})]})]})]})}):null}}}]);
//# sourceMappingURL=5.41b9c688.chunk.js.map