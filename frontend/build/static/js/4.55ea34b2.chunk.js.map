{"version":3,"sources":["services/bookingService.ts","components/Dashboard/UserDashboard.tsx"],"names":["API_URL","process","REACT_APP_API_URL","bookingService","createBooking","bookingData","token","authService","getToken","axios","post","headers","Authorization","data","getUserBookings","get","cancelBooking","bookingId","patch","UserDashboard","user","logout","useAuth","bookings","setBookings","useState","loading","setLoading","error","setError","useEffect","fetchBookings","async","userBookings","err","console","_jsx","className","children","_jsxs","onClick","length","href","map","booking","package","title","Date","travelDate","toLocaleDateString","status","totalPrice","toFixed","handleCancelBooking","_id"],"mappings":"+HAAA,sDAKA,MAAMA,EAAUC,yTAAYC,mBAAqB,4BAEpCC,EAAiB,CAC5B,mBAAMC,CAAcC,GAMlB,MAAMC,EAAQC,IAAYC,WAI1B,aAHuBC,IAAMC,KAAK,GAAGV,0BAAiC,CACpEW,QAAS,CAAEC,cAAe,UAAUN,QAEtBO,IAClB,EAEA,qBAAMC,GAEJ,MAAMR,EAAQC,IAAYC,WAI1B,aAHuBC,IAAMM,IAAI,GAAGf,gBAAuB,CACzDW,QAAS,CAAEC,cAAe,UAAUN,QAEtBO,IAClB,EAEA,mBAAMG,CAAcC,GAElB,MAAMX,EAAQC,IAAYC,WAQ1B,aAPuBC,IAAMS,MAC3B,GAAGlB,cAAoBiB,WACvB,CAAC,EACD,CACEN,QAAS,CAAEC,cAAe,UAAUN,QAGxBO,IAClB,E,kCCzCF,yCA+GeM,UAzGiBA,KAE9B,MAAM,KAAEC,EAAI,OAAEC,GAAWC,eAClBC,EAAUC,GAAeC,mBAAoB,KAC7CC,EAASC,GAAcF,oBAAS,IAChCG,EAAOC,GAAYJ,mBAAS,IAEnCK,qBAAU,KACRC,GAAe,GACd,IAEH,MAAMA,EAAgBC,UACpB,IACE,MAAMC,QAAqB9B,IAAeW,kBAC1CU,EAAYS,GACZN,GAAW,EACb,CAAE,MAAOO,GACPL,EAAS,4BACTF,GAAW,GACXQ,QAAQP,MAAMM,EAChB,GAcF,OAAIR,EAAgBU,cAAA,OAAKC,UAAU,oBAAmBC,SAAC,yBAGrDC,eAAA,OAAKF,UAAU,8BAA6BC,SAAA,CAC1CC,eAAA,OAAKF,UAAU,yCAAwCC,SAAA,CACrDC,eAAA,MAAIF,UAAU,qBAAoBC,SAAA,CAAC,YAAW,cAC9CF,cAAA,UACEI,QAASnB,EACTgB,UAAU,2DAA0DC,SACrE,cAKHC,eAAA,OAAAD,SAAA,CACEF,cAAA,MAAIC,UAAU,8BAA6BC,SAAC,kBAE3CV,GAASQ,cAAA,OAAKC,UAAU,oBAAmBC,SAAEV,IAEzB,IAApBL,EAASkB,OACRF,eAAA,OAAKF,UAAU,iCAAgCC,SAAA,CAAC,4BAE9CF,cAAA,KAAGM,KAAK,YAAYL,UAAU,qCAAoCC,SAAC,wBAKrEF,cAAA,OAAKC,UAAU,YAAWC,SACvBf,EAASoB,KAAKC,GACbL,eAAA,OAEEF,UAAU,0DAAyDC,SAAA,CAEnEC,eAAA,OAAAD,SAAA,CACEF,cAAA,MAAIC,UAAU,wBAAuBC,SAClCM,EAAQC,QAAQC,QAEnBP,eAAA,KAAGF,UAAU,gBAAeC,SAAA,CAAC,gBACb,IAAIS,KAAKH,EAAQI,YAAYC,wBAE7CV,eAAA,KAAAD,SAAA,CACEF,cAAA,QAAMC,UAAU,cAAaC,SAAC,YAAe,IAC7CF,cAAA,QAAMC,UAAW,2BACM,cAAnBO,EAAQM,OAAyB,eAAiB,yCACpDZ,SACCM,EAAQM,eAIfX,eAAA,OAAKF,UAAU,8BAA6BC,SAAA,CAC1CC,eAAA,QAAMF,UAAU,0BAAyBC,SAAA,CAAC,IACtCM,EAAQO,WAAWC,QAAQ,MAEX,cAAnBR,EAAQM,QACPd,cAAA,UACEI,QAASA,IAlEDR,WAC1B,UACQ7B,IAAea,cAAcC,GAEnCc,GACF,CAAE,MAAOG,GACPL,EAAS,4BACTM,QAAQP,MAAMM,EAChB,GA0DiCmB,CAAoBT,EAAQU,KAC3CjB,UAAU,2DAA0DC,SACrE,wBA3BAM,EAAQU,cAqCnB,C","file":"static/js/4.55ea34b2.chunk.js","sourcesContent":["import axios from 'axios';\r\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\nimport { Booking } from '../types/Booking';\r\nimport { authService } from './authService';\r\n\r\nconst API_URL = process.env.REACT_APP_API_URL || 'http://localhost:5000/api';\r\n\r\nexport const bookingService = {\r\n  async createBooking(bookingData: {\r\n    packageId: string;\r\n    travelDate: Date;\r\n    numberOfTravelers: number;\r\n  }) {\r\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n    const token = authService.getToken();\r\n    const response = await axios.post(`${API_URL}/bookings, bookingData`, {\r\n      headers: { Authorization: `Bearer ${token}` }\r\n    });\r\n    return response.data;\r\n  },\r\n  \r\n  async getUserBookings() {\r\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n    const token = authService.getToken();\r\n    const response = await axios.get(`${API_URL}api/bookings`, {\r\n      headers: { Authorization: `Bearer ${token}` }\r\n    });\r\n    return response.data;\r\n  },\r\n  \r\n  async cancelBooking(bookingId: string) {\r\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n    const token = authService.getToken();\r\n    const response = await axios.patch(\r\n      `${API_URL}/bookings/${bookingId}/cancel`, \r\n      {},\r\n      {\r\n        headers: { Authorization: `Bearer ${token}` }\r\n      }\r\n    );\r\n    return response.data;\r\n  }\r\n}; ","// src/components/Dashboard/UserDashboard.tsx\r\nimport React, { useState, useEffect } from 'react';\r\nimport { useAuth } from '../../contexts/AuthContext';\r\nimport { bookingService } from '../../services/bookingService';\r\nimport { Booking } from '../../types/Booking';\r\n\r\nconst UserDashboard: React.FC = () => {\r\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n  const { user, logout } = useAuth();\r\n  const [bookings, setBookings] = useState<Booking[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState('');\r\n\r\n  useEffect(() => {\r\n    fetchBookings();\r\n  }, []);\r\n\r\n  const fetchBookings = async () => {\r\n    try {\r\n      const userBookings = await bookingService.getUserBookings();\r\n      setBookings(userBookings);\r\n      setLoading(false);\r\n    } catch (err) {\r\n      setError('Failed to fetch bookings');\r\n      setLoading(false);\r\n      console.error(err);\r\n    }\r\n  };\r\n\r\n  const handleCancelBooking = async (bookingId: string) => {\r\n    try {\r\n      await bookingService.cancelBooking(bookingId);\r\n      // Refresh bookings after cancellation\r\n      fetchBookings();\r\n    } catch (err) {\r\n      setError('Failed to cancel booking');\r\n      console.error(err);\r\n    }\r\n  };\r\n\r\n  if (loading) return <div className=\"text-center py-10\">Loading dashboard...</div>;\r\n\r\n  return (\r\n    <div className=\"container mx-auto px-4 py-8\">\r\n      <div className=\"flex justify-between items-center mb-8\">\r\n        <h1 className=\"text-3xl font-bold\">Welcome, { 'Traveler'}</h1>\r\n        <button \r\n          onClick={logout}\r\n          className=\"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600\"\r\n        >\r\n          Logout\r\n        </button>\r\n      </div>\r\n\r\n      <div>\r\n        <h2 className=\"text-2xl font-semibold mb-4\">Your Bookings</h2>\r\n        \r\n        {error && <div className=\"text-red-500 mb-4\">{error}</div>}\r\n\r\n        {bookings.length === 0 ? (\r\n          <div className=\"text-center text-gray-500 py-6\">\r\n            You have no bookings yet. \r\n            <a href=\"/packages\" className=\"text-blue-500 ml-2 hover:underline\">\r\n              Explore Packages\r\n            </a>\r\n          </div>\r\n        ) : (\r\n          <div className=\"space-y-4\">\r\n            {bookings.map((booking) => (\r\n              <div \r\n                key={booking._id} \r\n                className=\"border rounded-lg p-4 flex justify-between items-center\"\r\n              >\r\n                <div>\r\n                  <h3 className=\"text-xl font-semibold\">\r\n                    {booking.package.title}\r\n                  </h3>\r\n                  <p className=\"text-gray-600\">\r\n                    Travel Date: {new Date(booking.travelDate).toLocaleDateString()}\r\n                  </p>\r\n                  <p>\r\n                    <span className=\"font-medium\">Status:</span>{' '}\r\n                    <span className={`\r\n                      ${booking.status === 'Cancelled' ? 'text-red-500' : 'text-green-500'}\r\n                    `}>\r\n                      {booking.status}\r\n                    </span>\r\n                  </p>\r\n                </div>\r\n                <div className=\"flex items-center space-x-4\">\r\n                  <span className=\"font-bold text-blue-600\">\r\n                    ${booking.totalPrice.toFixed(2)}\r\n                  </span>\r\n                  {booking.status !== 'Cancelled' && (\r\n                    <button \r\n                      onClick={() => handleCancelBooking(booking._id)}\r\n                      className=\"bg-red-500 text-white px-3 py-1 rounded hover:bg-red-600\"\r\n                    >\r\n                      Cancel Booking\r\n                    </button>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default UserDashboard;\r\n"],"sourceRoot":""}