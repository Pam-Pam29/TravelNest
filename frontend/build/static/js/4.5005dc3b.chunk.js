(this["webpackJsonptravenest-frontend"]=this["webpackJsonptravenest-frontend"]||[]).push([[4],{31:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var s=a(17),c=a(7);const n="http://localhost:5000/api",o={async createBooking(e){const t=c.a.getToken();return(await s.a.post(`${n}/bookings, bookingData`,{headers:{Authorization:`Bearer ${t}`}})).data},async getUserBookings(){const e=c.a.getToken();return(await s.a.get(`${n}/bookings`,{headers:{Authorization:`Bearer ${e}`}})).data},async cancelBooking(e){const t=c.a.getToken();return(await s.a.patch(`${n}/bookings/${e}/cancel`,{},{headers:{Authorization:`Bearer ${t}`}})).data}}},35:function(e,t,a){"use strict";a.r(t);var s=a(0),c=a(8),n=a(31),o=a(5);t.default=()=>{const{user:e,logout:t}=Object(c.b)(),[a,r]=Object(s.useState)([]),[i,l]=Object(s.useState)(!0),[d,b]=Object(s.useState)("");Object(s.useEffect)((()=>{j()}),[]);const j=async()=>{try{const e=await n.a.getUserBookings();r(e),l(!1)}catch(e){b("Failed to fetch bookings"),l(!1),console.error(e)}};return i?Object(o.jsx)("div",{className:"text-center py-10",children:"Loading dashboard..."}):Object(o.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[Object(o.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[Object(o.jsxs)("h1",{className:"text-3xl font-bold",children:["Welcome, ",(null===e||void 0===e?void 0:e.firstName)||"Traveler"]}),Object(o.jsx)("button",{onClick:t,className:"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600",children:"Logout"})]}),Object(o.jsxs)("div",{children:[Object(o.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"Your Bookings"}),d&&Object(o.jsx)("div",{className:"text-red-500 mb-4",children:d}),0===a.length?Object(o.jsxs)("div",{className:"text-center text-gray-500 py-6",children:["You have no bookings yet.",Object(o.jsx)("a",{href:"/packages",className:"text-blue-500 ml-2 hover:underline",children:"Explore Packages"})]}):Object(o.jsx)("div",{className:"space-y-4",children:a.map((e=>Object(o.jsxs)("div",{className:"border rounded-lg p-4 flex justify-between items-center",children:[Object(o.jsxs)("div",{children:[Object(o.jsx)("h3",{className:"text-xl font-semibold",children:e.package.title}),Object(o.jsxs)("p",{className:"text-gray-600",children:["Travel Date: ",new Date(e.travelDate).toLocaleDateString()]}),Object(o.jsxs)("p",{children:[Object(o.jsx)("span",{className:"font-medium",children:"Status:"})," ",Object(o.jsx)("span",{className:`\n                      ${"Cancelled"===e.status?"text-red-500":"text-green-500"}\n                    `,children:e.status})]})]}),Object(o.jsxs)("div",{className:"flex items-center space-x-4",children:[Object(o.jsxs)("span",{className:"font-bold text-blue-600",children:["$",e.totalPrice.toFixed(2)]}),"Cancelled"!==e.status&&Object(o.jsx)("button",{onClick:()=>(async e=>{try{await n.a.cancelBooking(e),j()}catch(t){b("Failed to cancel booking"),console.error(t)}})(e._id),className:"bg-red-500 text-white px-3 py-1 rounded hover:bg-red-600",children:"Cancel Booking"})]})]},e._id)))})]})]})}}}]);
//# sourceMappingURL=4.5005dc3b.chunk.js.map