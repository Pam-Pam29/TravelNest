{"code":"(this[\"webpackJsonptravenest-frontend\"]=this[\"webpackJsonptravenest-frontend\"]||[]).push([[4],{31:function(e,t,a){\"use strict\";a.d(t,\"a\",(function(){return o}));var s=a(17),c=a(7);const n=\"http://localhost:5000/api\",o={async createBooking(e){const t=c.a.getToken();return(await s.a.post(`${n}/bookings, bookingData`,{headers:{Authorization:`Bearer ${t}`}})).data},async getUserBookings(){const e=c.a.getToken();return(await s.a.get(`${n}/bookings`,{headers:{Authorization:`Bearer ${e}`}})).data},async cancelBooking(e){const t=c.a.getToken();return(await s.a.patch(`${n}/bookings/${e}/cancel`,{},{headers:{Authorization:`Bearer ${t}`}})).data}}},35:function(e,t,a){\"use strict\";a.r(t);var s=a(0),c=a(8),n=a(31),o=a(5);t.default=()=>{const{user:e,logout:t}=Object(c.b)(),[a,r]=Object(s.useState)([]),[i,l]=Object(s.useState)(!0),[d,b]=Object(s.useState)(\"\");Object(s.useEffect)((()=>{j()}),[]);const j=async()=>{try{const e=await n.a.getUserBookings();r(e),l(!1)}catch(e){b(\"Failed to fetch bookings\"),l(!1),console.error(e)}};return i?Object(o.jsx)(\"div\",{className:\"text-center py-10\",children:\"Loading dashboard...\"}):Object(o.jsxs)(\"div\",{className:\"container mx-auto px-4 py-8\",children:[Object(o.jsxs)(\"div\",{className:\"flex justify-between items-center mb-8\",children:[Object(o.jsxs)(\"h1\",{className:\"text-3xl font-bold\",children:[\"Welcome, \",(null===e||void 0===e?void 0:e.firstName)||\"Traveler\"]}),Object(o.jsx)(\"button\",{onClick:t,className:\"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600\",children:\"Logout\"})]}),Object(o.jsxs)(\"div\",{children:[Object(o.jsx)(\"h2\",{className:\"text-2xl font-semibold mb-4\",children:\"Your Bookings\"}),d&&Object(o.jsx)(\"div\",{className:\"text-red-500 mb-4\",children:d}),0===a.length?Object(o.jsxs)(\"div\",{className:\"text-center text-gray-500 py-6\",children:[\"You have no bookings yet.\",Object(o.jsx)(\"a\",{href:\"/packages\",className:\"text-blue-500 ml-2 hover:underline\",children:\"Explore Packages\"})]}):Object(o.jsx)(\"div\",{className:\"space-y-4\",children:a.map((e=>Object(o.jsxs)(\"div\",{className:\"border rounded-lg p-4 flex justify-between items-center\",children:[Object(o.jsxs)(\"div\",{children:[Object(o.jsx)(\"h3\",{className:\"text-xl font-semibold\",children:e.package.title}),Object(o.jsxs)(\"p\",{className:\"text-gray-600\",children:[\"Travel Date: \",new Date(e.travelDate).toLocaleDateString()]}),Object(o.jsxs)(\"p\",{children:[Object(o.jsx)(\"span\",{className:\"font-medium\",children:\"Status:\"}),\" \",Object(o.jsx)(\"span\",{className:`\\n                      ${\"Cancelled\"===e.status?\"text-red-500\":\"text-green-500\"}\\n                    `,children:e.status})]})]}),Object(o.jsxs)(\"div\",{className:\"flex items-center space-x-4\",children:[Object(o.jsxs)(\"span\",{className:\"font-bold text-blue-600\",children:[\"$\",e.totalPrice.toFixed(2)]}),\"Cancelled\"!==e.status&&Object(o.jsx)(\"button\",{onClick:()=>(async e=>{try{await n.a.cancelBooking(e),j()}catch(t){b(\"Failed to cancel booking\"),console.error(t)}})(e._id),className:\"bg-red-500 text-white px-3 py-1 rounded hover:bg-red-600\",children:\"Cancel Booking\"})]})]},e._id)))})]})]})}}}]);","name":"static/js/4.5005dc3b.chunk.js","map":{"version":3,"names":["this","push","module","__webpack_exports__","__webpack_require__","d","bookingService","axios__WEBPACK_IMPORTED_MODULE_0__","_authService__WEBPACK_IMPORTED_MODULE_1__","API_URL","createBooking","bookingData","token","getToken","post","headers","Authorization","data","getUserBookings","get","cancelBooking","bookingId","patch","r","react__WEBPACK_IMPORTED_MODULE_0__","_contexts_AuthContext__WEBPACK_IMPORTED_MODULE_1__","_services_bookingService__WEBPACK_IMPORTED_MODULE_2__","react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__","user","logout","Object","bookings","setBookings","loading","setLoading","error","setError","fetchBookings","async","userBookings","err","console","className","children","firstName","onClick","length","href","map","booking","package","title","Date","travelDate","toLocaleDateString","status","totalPrice","toFixed","handleCancelBooking","_id"],"sources":["static/js/4.5005dc3b.chunk.js"],"mappings":"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","ignoreList":[]},"input":"(this[\"webpackJsonptravenest-frontend\"] = this[\"webpackJsonptravenest-frontend\"] || []).push([[4],{\n\n/***/ 31:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return bookingService; });\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(17);\n/* harmony import */ var _authService__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(7);\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nconst API_URL=\"http://localhost:5000/api\"||false;const bookingService={async createBooking(bookingData){// eslint-disable-next-line @typescript-eslint/no-unused-vars\nconst token=_authService__WEBPACK_IMPORTED_MODULE_1__[/* authService */ \"a\"].getToken();const response=await axios__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"].post(`${API_URL}/bookings, bookingData`,{headers:{Authorization:`Bearer ${token}`}});return response.data;},async getUserBookings(){// eslint-disable-next-line @typescript-eslint/no-unused-vars\nconst token=_authService__WEBPACK_IMPORTED_MODULE_1__[/* authService */ \"a\"].getToken();const response=await axios__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"].get(`${API_URL}/bookings`,{headers:{Authorization:`Bearer ${token}`}});return response.data;},async cancelBooking(bookingId){// eslint-disable-next-line @typescript-eslint/no-unused-vars\nconst token=_authService__WEBPACK_IMPORTED_MODULE_1__[/* authService */ \"a\"].getToken();const response=await axios__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"].patch(`${API_URL}/bookings/${bookingId}/cancel`,{},{headers:{Authorization:`Bearer ${token}`}});return response.data;}};\n\n/***/ }),\n\n/***/ 35:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(0);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _contexts_AuthContext__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(8);\n/* harmony import */ var _services_bookingService__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(31);\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(5);\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__);\n// src/components/Dashboard/UserDashboard.tsx\nconst UserDashboard=()=>{const{user,logout}=Object(_contexts_AuthContext__WEBPACK_IMPORTED_MODULE_1__[/* useAuth */ \"b\"])();const[bookings,setBookings]=Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])([]);const[loading,setLoading]=Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(true);const[error,setError]=Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])('');Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useEffect\"])(()=>{fetchBookings();},[]);const fetchBookings=async()=>{try{const userBookings=await _services_bookingService__WEBPACK_IMPORTED_MODULE_2__[/* bookingService */ \"a\"].getUserBookings();setBookings(userBookings);setLoading(false);}catch(err){setError('Failed to fetch bookings');setLoading(false);console.error(err);}};const handleCancelBooking=async bookingId=>{try{await _services_bookingService__WEBPACK_IMPORTED_MODULE_2__[/* bookingService */ \"a\"].cancelBooking(bookingId);// Refresh bookings after cancellation\nfetchBookings();}catch(err){setError('Failed to cancel booking');console.error(err);}};if(loading)return/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__[\"jsx\"])(\"div\",{className:\"text-center py-10\",children:\"Loading dashboard...\"});return/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__[\"jsxs\"])(\"div\",{className:\"container mx-auto px-4 py-8\",children:[/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__[\"jsxs\"])(\"div\",{className:\"flex justify-between items-center mb-8\",children:[/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__[\"jsxs\"])(\"h1\",{className:\"text-3xl font-bold\",children:[\"Welcome, \",(user===null||user===void 0?void 0:user.firstName)||'Traveler']}),/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__[\"jsx\"])(\"button\",{onClick:logout,className:\"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600\",children:\"Logout\"})]}),/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__[\"jsxs\"])(\"div\",{children:[/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__[\"jsx\"])(\"h2\",{className:\"text-2xl font-semibold mb-4\",children:\"Your Bookings\"}),error&&/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__[\"jsx\"])(\"div\",{className:\"text-red-500 mb-4\",children:error}),bookings.length===0?/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__[\"jsxs\"])(\"div\",{className:\"text-center text-gray-500 py-6\",children:[\"You have no bookings yet.\",/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__[\"jsx\"])(\"a\",{href:\"/packages\",className:\"text-blue-500 ml-2 hover:underline\",children:\"Explore Packages\"})]}):/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__[\"jsx\"])(\"div\",{className:\"space-y-4\",children:bookings.map(booking=>/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__[\"jsxs\"])(\"div\",{className:\"border rounded-lg p-4 flex justify-between items-center\",children:[/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__[\"jsxs\"])(\"div\",{children:[/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__[\"jsx\"])(\"h3\",{className:\"text-xl font-semibold\",children:booking.package.title}),/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__[\"jsxs\"])(\"p\",{className:\"text-gray-600\",children:[\"Travel Date: \",new Date(booking.travelDate).toLocaleDateString()]}),/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__[\"jsxs\"])(\"p\",{children:[/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__[\"jsx\"])(\"span\",{className:\"font-medium\",children:\"Status:\"}),' ',/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__[\"jsx\"])(\"span\",{className:`\n                      ${booking.status==='Cancelled'?'text-red-500':'text-green-500'}\n                    `,children:booking.status})]})]}),/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__[\"jsxs\"])(\"div\",{className:\"flex items-center space-x-4\",children:[/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__[\"jsxs\"])(\"span\",{className:\"font-bold text-blue-600\",children:[\"$\",booking.totalPrice.toFixed(2)]}),booking.status!=='Cancelled'&&/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__[\"jsx\"])(\"button\",{onClick:()=>handleCancelBooking(booking._id),className:\"bg-red-500 text-white px-3 py-1 rounded hover:bg-red-600\",children:\"Cancel Booking\"})]})]},booking._id))})]})]});};/* harmony default export */ __webpack_exports__[\"default\"] = (UserDashboard);\n\n/***/ })\n\n}]);","inputSourceMap":{"version":3,"sources":["C:/Users/pampam/TravelNest/TravelNest/frontend/src/services/bookingService.ts","C:/Users/pampam/TravelNest/TravelNest/frontend/src/components/Dashboard/UserDashboard.tsx"],"names":["API_URL","process","bookingService","createBooking","bookingData","token","authService","getToken","response","axios","post","headers","Authorization","data","getUserBookings","get","cancelBooking","bookingId","patch","UserDashboard","user","logout","useAuth","bookings","setBookings","useState","loading","setLoading","error","setError","useEffect","fetchBookings","userBookings","err","console","handleCancelBooking","_jsx","className","children","_jsxs","firstName","onClick","length","href","map","booking","package","title","Date","travelDate","toLocaleDateString","status","totalPrice","toFixed","_id"],"mappings":"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","file":"x","sourcesContent":["import axios from 'axios';\r\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\nimport { Booking } from '../types/Booking';\r\nimport { authService } from './authService';\r\n\r\nconst API_URL = process.env.REACT_APP_API_URL || 'http://localhost:5000/api';\r\n\r\nexport const bookingService = {\r\n  async createBooking(bookingData: {\r\n    packageId: string;\r\n    travelDate: Date;\r\n    numberOfTravelers: number;\r\n  }) {\r\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n    const token = authService.getToken();\r\n    const response = await axios.post(`${API_URL}/bookings, bookingData`, {\r\n      headers: { Authorization: `Bearer ${token}` }\r\n    });\r\n    return response.data;\r\n  },\r\n  \r\n  async getUserBookings() {\r\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n    const token = authService.getToken();\r\n    const response = await axios.get(`${API_URL}/bookings`, {\r\n      headers: { Authorization: `Bearer ${token}` }\r\n    });\r\n    return response.data;\r\n  },\r\n  \r\n  async cancelBooking(bookingId: string) {\r\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n    const token = authService.getToken();\r\n    const response = await axios.patch(\r\n      `${API_URL}/bookings/${bookingId}/cancel`, \r\n      {},\r\n      {\r\n        headers: { Authorization: `Bearer ${token}` }\r\n      }\r\n    );\r\n    return response.data;\r\n  }\r\n}; ","// src/components/Dashboard/UserDashboard.tsx\r\nimport React, { useState, useEffect } from 'react';\r\nimport { useAuth } from '../../contexts/AuthContext';\r\nimport { bookingService } from '../../services/bookingService';\r\nimport { Booking } from '../../types/Booking';\r\n\r\nconst UserDashboard: React.FC = () => {\r\n  const { user, logout } = useAuth();\r\n  const [bookings, setBookings] = useState<Booking[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState('');\r\n\r\n  useEffect(() => {\r\n    fetchBookings();\r\n  }, []);\r\n\r\n  const fetchBookings = async () => {\r\n    try {\r\n      const userBookings = await bookingService.getUserBookings();\r\n      setBookings(userBookings);\r\n      setLoading(false);\r\n    } catch (err) {\r\n      setError('Failed to fetch bookings');\r\n      setLoading(false);\r\n      console.error(err);\r\n    }\r\n  };\r\n\r\n  const handleCancelBooking = async (bookingId: string) => {\r\n    try {\r\n      await bookingService.cancelBooking(bookingId);\r\n      // Refresh bookings after cancellation\r\n      fetchBookings();\r\n    } catch (err) {\r\n      setError('Failed to cancel booking');\r\n      console.error(err);\r\n    }\r\n  };\r\n\r\n  if (loading) return <div className=\"text-center py-10\">Loading dashboard...</div>;\r\n\r\n  return (\r\n    <div className=\"container mx-auto px-4 py-8\">\r\n      <div className=\"flex justify-between items-center mb-8\">\r\n        <h1 className=\"text-3xl font-bold\">Welcome, {user?.firstName || 'Traveler'}</h1>\r\n        <button \r\n          onClick={logout}\r\n          className=\"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600\"\r\n        >\r\n          Logout\r\n        </button>\r\n      </div>\r\n\r\n      <div>\r\n        <h2 className=\"text-2xl font-semibold mb-4\">Your Bookings</h2>\r\n        \r\n        {error && <div className=\"text-red-500 mb-4\">{error}</div>}\r\n\r\n        {bookings.length === 0 ? (\r\n          <div className=\"text-center text-gray-500 py-6\">\r\n            You have no bookings yet. \r\n            <a href=\"/packages\" className=\"text-blue-500 ml-2 hover:underline\">\r\n              Explore Packages\r\n            </a>\r\n          </div>\r\n        ) : (\r\n          <div className=\"space-y-4\">\r\n            {bookings.map((booking) => (\r\n              <div \r\n                key={booking._id} \r\n                className=\"border rounded-lg p-4 flex justify-between items-center\"\r\n              >\r\n                <div>\r\n                  <h3 className=\"text-xl font-semibold\">\r\n                    {booking.package.title}\r\n                  </h3>\r\n                  <p className=\"text-gray-600\">\r\n                    Travel Date: {new Date(booking.travelDate).toLocaleDateString()}\r\n                  </p>\r\n                  <p>\r\n                    <span className=\"font-medium\">Status:</span>{' '}\r\n                    <span className={`\r\n                      ${booking.status === 'Cancelled' ? 'text-red-500' : 'text-green-500'}\r\n                    `}>\r\n                      {booking.status}\r\n                    </span>\r\n                  </p>\r\n                </div>\r\n                <div className=\"flex items-center space-x-4\">\r\n                  <span className=\"font-bold text-blue-600\">\r\n                    ${booking.totalPrice.toFixed(2)}\r\n                  </span>\r\n                  {booking.status !== 'Cancelled' && (\r\n                    <button \r\n                      onClick={() => handleCancelBooking(booking._id)}\r\n                      className=\"bg-red-500 text-white px-3 py-1 rounded hover:bg-red-600\"\r\n                    >\r\n                      Cancel Booking\r\n                    </button>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default UserDashboard;\r\n"]}}