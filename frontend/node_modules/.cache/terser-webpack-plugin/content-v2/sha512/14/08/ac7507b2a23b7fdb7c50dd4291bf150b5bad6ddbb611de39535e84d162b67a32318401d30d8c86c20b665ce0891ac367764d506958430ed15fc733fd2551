{"code":"(this[\"webpackJsonptravenest-frontend\"]=this[\"webpackJsonptravenest-frontend\"]||[]).push([[8],{46:function(e,t,i){\"use strict\";i.r(t),i.d(t,\"packageService\",(function(){return n}));var a=i(0),c=i(18),r=i(10),s=i(5);const n={async getAllPackages(e){try{const t=Object(c.b)(r.b,\"packages\");let i=Object(c.g)(t);e&&(void 0!==e.minPrice&&(i=Object(c.g)(i,Object(c.h)(\"price\",\">=\",e.minPrice))),void 0!==e.maxPrice&&(i=Object(c.g)(i,Object(c.h)(\"price\",\"<=\",e.maxPrice))),e.destination&&(i=Object(c.g)(i,Object(c.h)(\"destinations\",\"array-contains\",e.destination))));return(await Object(c.e)(i)).docs.map((e=>{const t=e.data();return{_id:e.id,title:t.title||\"\",description:t.description||\"\",price:t.price||0,duration:t.duration||0,destinations:t.destinations||[],availability:t.availability||0,images:t.images||[],includedServices:t.includedServices||[]}}))}catch(t){throw console.error(\"Error fetching packages\",t),t}},async getPackageById(e){try{const t=Object(c.c)(r.b,\"packages\",e),i=await Object(c.d)(t);if(!i.exists())throw new Error(\"Package not found\");const a=i.data();return{_id:i.id,title:a.title||\"\",description:a.description||\"\",price:a.price||0,duration:a.duration||0,destinations:a.destinations||[],availability:a.availability||0,images:a.images||[],includedServices:a.includedServices||[]}}catch(t){throw console.error(\"Error fetching package\",t),t}},async createPackage(e){try{return(await Object(c.a)(Object(c.b)(r.b,\"packages\"),{title:e.title,description:e.description,price:e.price,duration:e.duration,destinations:e.destinations,availability:e.availability,images:e.images,includedServices:e.includedServices})).id}catch(t){throw console.error(\"Error creating package\",t),t}}};t.default=()=>{const[e,t]=Object(a.useState)([]),[i,c]=Object(a.useState)(!0),[r,d]=Object(a.useState)(null);return Object(a.useEffect)((()=>{(async()=>{try{const e=await n.getAllPackages();t(e),c(!1)}catch(e){d(\"Failed to fetch packages\"),c(!1),console.error(e)}})()}),[]),i?Object(s.jsx)(\"div\",{children:\"Loading packages...\"}):r?Object(s.jsxs)(\"div\",{children:[\"Error: \",r]}):Object(s.jsxs)(\"div\",{className:\"package-list-container\",children:[Object(s.jsx)(\"h1\",{children:\"Available Travel Packages\"}),0===e.length?Object(s.jsx)(\"p\",{children:\"No packages available at the moment.\"}):Object(s.jsx)(\"div\",{className:\"package-grid\",children:e.map((e=>Object(s.jsxs)(\"div\",{className:\"package-card\",children:[Object(s.jsx)(\"h3\",{children:e.title}),Object(s.jsx)(\"p\",{children:e.description}),Object(s.jsxs)(\"p\",{children:[\"Price: $\",e.price]}),Object(s.jsxs)(\"p\",{children:[\"Duration: \",e.duration,\" days\"]}),Object(s.jsxs)(\"p\",{children:[\"Availability: \",e.availability,\" spots left\"]}),Object(s.jsx)(\"button\",{children:\"View Details\"})]},e._id)))})]})}}}]);","name":"static/js/8.6a12b14c.chunk.js","map":{"version":3,"names":["this","push","module","__webpack_exports__","__webpack_require__","r","d","packageService","react__WEBPACK_IMPORTED_MODULE_0__","firebase_firestore__WEBPACK_IMPORTED_MODULE_1__","_firebaseConfig__WEBPACK_IMPORTED_MODULE_2__","react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__","getAllPackages","filters","packagesCollection","Object","q","undefined","minPrice","maxPrice","destination","docs","map","docSnapshot","data","_id","id","title","description","price","duration","destinations","availability","images","includedServices","error","console","getPackageById","packageDoc","packageSnapshot","exists","Error","createPackage","packageData","packages","setPackages","loading","setLoading","setError","async","packagesData","err","fetchPackages","children","className","length","pkg"],"sources":["static/js/8.6a12b14c.chunk.js"],"mappings":"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","ignoreList":[]},"input":"(this[\"webpackJsonptravenest-frontend\"] = this[\"webpackJsonptravenest-frontend\"] || []).push([[8],{\n\n/***/ 46:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"packageService\", function() { return packageService; });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(0);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var firebase_firestore__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(18);\n/* harmony import */ var _firebaseConfig__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(10);\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(5);\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__);\n// Define the service outside of the component\nconst packageService={async getAllPackages(filters){try{const packagesCollection=Object(firebase_firestore__WEBPACK_IMPORTED_MODULE_1__[/* collection */ \"b\"])(_firebaseConfig__WEBPACK_IMPORTED_MODULE_2__[/* db */ \"b\"],'packages');// Build query based on filters\nlet q=Object(firebase_firestore__WEBPACK_IMPORTED_MODULE_1__[/* query */ \"g\"])(packagesCollection);if(filters){if(filters.minPrice!==undefined){q=Object(firebase_firestore__WEBPACK_IMPORTED_MODULE_1__[/* query */ \"g\"])(q,Object(firebase_firestore__WEBPACK_IMPORTED_MODULE_1__[/* where */ \"h\"])('price','>=',filters.minPrice));}if(filters.maxPrice!==undefined){q=Object(firebase_firestore__WEBPACK_IMPORTED_MODULE_1__[/* query */ \"g\"])(q,Object(firebase_firestore__WEBPACK_IMPORTED_MODULE_1__[/* where */ \"h\"])('price','<=',filters.maxPrice));}if(filters.destination){q=Object(firebase_firestore__WEBPACK_IMPORTED_MODULE_1__[/* query */ \"g\"])(q,Object(firebase_firestore__WEBPACK_IMPORTED_MODULE_1__[/* where */ \"h\"])('destinations','array-contains',filters.destination));}}const packagesSnapshot=await Object(firebase_firestore__WEBPACK_IMPORTED_MODULE_1__[/* getDocs */ \"e\"])(q);return packagesSnapshot.docs.map(docSnapshot=>{const data=docSnapshot.data();return{_id:docSnapshot.id,title:data.title||'',description:data.description||'',price:data.price||0,duration:data.duration||0,destinations:data.destinations||[],availability:data.availability||0,images:data.images||[],includedServices:data.includedServices||[]};});}catch(error){console.error('Error fetching packages',error);throw error;}},// Keep the other methods from your original code\nasync getPackageById(id){// Your existing code\ntry{const packageDoc=Object(firebase_firestore__WEBPACK_IMPORTED_MODULE_1__[/* doc */ \"c\"])(_firebaseConfig__WEBPACK_IMPORTED_MODULE_2__[/* db */ \"b\"],'packages',id);const packageSnapshot=await Object(firebase_firestore__WEBPACK_IMPORTED_MODULE_1__[/* getDoc */ \"d\"])(packageDoc);if(!packageSnapshot.exists()){throw new Error('Package not found');}const data=packageSnapshot.data();return{_id:packageSnapshot.id,title:data.title||'',description:data.description||'',price:data.price||0,duration:data.duration||0,destinations:data.destinations||[],availability:data.availability||0,images:data.images||[],includedServices:data.includedServices||[]};}catch(error){console.error('Error fetching package',error);throw error;}},async createPackage(packageData){// Your existing code\ntry{const docRef=await Object(firebase_firestore__WEBPACK_IMPORTED_MODULE_1__[/* addDoc */ \"a\"])(Object(firebase_firestore__WEBPACK_IMPORTED_MODULE_1__[/* collection */ \"b\"])(_firebaseConfig__WEBPACK_IMPORTED_MODULE_2__[/* db */ \"b\"],'packages'),{title:packageData.title,description:packageData.description,price:packageData.price,duration:packageData.duration,destinations:packageData.destinations,availability:packageData.availability,images:packageData.images,includedServices:packageData.includedServices});return docRef.id;}catch(error){console.error('Error creating package',error);throw error;}}};const PackageList=()=>{const[packages,setPackages]=Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])([]);const[loading,setLoading]=Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(true);const[error,setError]=Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(null);Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useEffect\"])(()=>{const fetchPackages=async()=>{try{const packagesData=await packageService.getAllPackages();setPackages(packagesData);setLoading(false);}catch(err){setError('Failed to fetch packages');setLoading(false);console.error(err);}};fetchPackages();},[]);if(loading)return/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__[\"jsx\"])(\"div\",{children:\"Loading packages...\"});if(error)return/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__[\"jsxs\"])(\"div\",{children:[\"Error: \",error]});return/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__[\"jsxs\"])(\"div\",{className:\"package-list-container\",children:[/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__[\"jsx\"])(\"h1\",{children:\"Available Travel Packages\"}),packages.length===0?/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__[\"jsx\"])(\"p\",{children:\"No packages available at the moment.\"}):/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__[\"jsx\"])(\"div\",{className:\"package-grid\",children:packages.map(pkg=>/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__[\"jsxs\"])(\"div\",{className:\"package-card\",children:[/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__[\"jsx\"])(\"h3\",{children:pkg.title}),/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__[\"jsx\"])(\"p\",{children:pkg.description}),/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__[\"jsxs\"])(\"p\",{children:[\"Price: $\",pkg.price]}),/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__[\"jsxs\"])(\"p\",{children:[\"Duration: \",pkg.duration,\" days\"]}),/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__[\"jsxs\"])(\"p\",{children:[\"Availability: \",pkg.availability,\" spots left\"]}),/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__[\"jsx\"])(\"button\",{children:\"View Details\"})]},pkg._id))})]});};/* harmony default export */ __webpack_exports__[\"default\"] = (PackageList);\n\n/***/ })\n\n}]);","inputSourceMap":{"version":3,"sources":["C:/Users/pampam/TravelNest/TravelNest/frontend/src/components/Packages/PackageList.tsx"],"names":["packageService","getAllPackages","filters","packagesCollection","collection","db","q","query","minPrice","undefined","where","maxPrice","destination","packagesSnapshot","getDocs","docs","map","docSnapshot","data","_id","id","title","description","price","duration","destinations","availability","images","includedServices","error","console","getPackageById","packageDoc","doc","packageSnapshot","getDoc","exists","Error","createPackage","packageData","docRef","addDoc","PackageList","packages","setPackages","useState","loading","setLoading","setError","useEffect","fetchPackages","packagesData","err","_jsx","children","_jsxs","className","length","pkg"],"mappings":"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","file":"x","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { \r\n  collection, \r\n  addDoc,\r\n  getDocs, \r\n  doc,\r\n  getDoc,\r\n  query,\r\n\r\n  where\r\n} from 'firebase/firestore';\r\nimport { db } from '../../firebaseConfig';\r\nimport { Package } from '../../types/Package';\r\n\r\ninterface PackageFilters {\r\n  minPrice?: number;\r\n  maxPrice?: number;\r\n  destination?: string;\r\n}\r\n\r\n// Define the service outside of the component\r\nexport const packageService = {\r\n  async getAllPackages(filters?: PackageFilters): Promise<Package[]> {\r\n    try {\r\n      const packagesCollection = collection(db, 'packages');\r\n      \r\n      // Build query based on filters\r\n      let q = query(packagesCollection);\r\n      \r\n      if (filters) {\r\n        if (filters.minPrice !== undefined) {\r\n          q = query(q, where('price', '>=', filters.minPrice));\r\n        }\r\n        \r\n        if (filters.maxPrice !== undefined) {\r\n          q = query(q, where('price', '<=', filters.maxPrice));\r\n        }\r\n        \r\n        if (filters.destination) {\r\n          q = query(q, where('destinations', 'array-contains', filters.destination));\r\n        }\r\n      }\r\n\r\n      const packagesSnapshot = await getDocs(q);\r\n      \r\n      return packagesSnapshot.docs.map(docSnapshot => {\r\n        const data = docSnapshot.data();\r\n        return {\r\n          _id: docSnapshot.id,\r\n          title: data.title || '',\r\n          description: data.description || '',\r\n          price: data.price || 0,\r\n          duration: data.duration || 0,\r\n          destinations: data.destinations || [],\r\n          availability: data.availability || 0,\r\n          images: data.images || [],\r\n          includedServices: data.includedServices || []\r\n        } as Package;\r\n      });\r\n    } catch (error) {\r\n      console.error('Error fetching packages', error);\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  // Keep the other methods from your original code\r\n  async getPackageById(id: string): Promise<Package> {\r\n    // Your existing code\r\n    try {\r\n      const packageDoc = doc(db, 'packages', id);\r\n      const packageSnapshot = await getDoc(packageDoc);\r\n      \r\n      if (!packageSnapshot.exists()) {\r\n        throw new Error('Package not found');\r\n      }\r\n\r\n      const data = packageSnapshot.data();\r\n      return {\r\n        _id: packageSnapshot.id,\r\n        title: data.title || '',\r\n        description: data.description || '',\r\n        price: data.price || 0,\r\n        duration: data.duration || 0,\r\n        destinations: data.destinations || [],\r\n        availability: data.availability || 0,\r\n        images: data.images || [],\r\n        includedServices: data.includedServices || []\r\n      } as Package;\r\n    } catch (error) {\r\n      console.error('Error fetching package', error);\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  async createPackage(packageData: Package): Promise<string> {\r\n    // Your existing code\r\n    try {\r\n      const docRef = await addDoc(collection(db, 'packages'), {\r\n        title: packageData.title,\r\n        description: packageData.description,\r\n        price: packageData.price,\r\n        duration: packageData.duration,\r\n        destinations: packageData.destinations,\r\n        availability: packageData.availability,\r\n        images: packageData.images,\r\n        includedServices: packageData.includedServices\r\n      });\r\n      return docRef.id;\r\n    } catch (error) {\r\n      console.error('Error creating package', error);\r\n      throw error;\r\n    }\r\n  }\r\n};\r\n\r\nconst PackageList: React.FC = () => {\r\n  const [packages, setPackages] = useState<Package[]>([]);\r\n  const [loading, setLoading] = useState<boolean>(true);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  useEffect(() => {\r\n    const fetchPackages = async () => {\r\n      try {\r\n        const packagesData = await packageService.getAllPackages();\r\n        setPackages(packagesData);\r\n        setLoading(false);\r\n      } catch (err) {\r\n        setError('Failed to fetch packages');\r\n        setLoading(false);\r\n        console.error(err);\r\n      }\r\n    };\r\n\r\n    fetchPackages();\r\n  }, []);\r\n\r\n  if (loading) return <div>Loading packages...</div>;\r\n  if (error) return <div>Error: {error}</div>;\r\n\r\n  return (\r\n    <div className=\"package-list-container\">\r\n      <h1>Available Travel Packages</h1>\r\n      {packages.length === 0 ? (\r\n        <p>No packages available at the moment.</p>\r\n      ) : (\r\n        <div className=\"package-grid\">\r\n          {packages.map((pkg) => (\r\n            <div key={pkg._id} className=\"package-card\">\r\n              <h3>{pkg.title}</h3>\r\n              <p>{pkg.description}</p>\r\n              <p>Price: ${pkg.price}</p>\r\n              <p>Duration: {pkg.duration} days</p>\r\n              <p>Availability: {pkg.availability} spots left</p>\r\n              <button>View Details</button>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PackageList;"]}}