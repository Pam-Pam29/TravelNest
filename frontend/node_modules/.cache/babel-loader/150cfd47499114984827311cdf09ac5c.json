{"ast":null,"code":"import{collection,addDoc,getDocs,doc,getDoc,query,where}from'firebase/firestore';import{db}from'../../firebaseConfig';export const packageService={async getAllPackages(filters){try{const packagesCollection=collection(db,'packages');// Build query based on filters\nlet q=query(packagesCollection);if(filters){if(filters.minPrice!==undefined){q=query(q,where('price','>=',filters.minPrice));}if(filters.maxPrice!==undefined){q=query(q,where('price','<=',filters.maxPrice));}if(filters.destination){q=query(q,where('destinations','array-contains',filters.destination));}}const packagesSnapshot=await getDocs(q);return packagesSnapshot.docs.map(docSnapshot=>{const data=docSnapshot.data();return{_id:docSnapshot.id,title:data.title||'',description:data.description||'',price:data.price||0,duration:data.duration||0,destinations:data.destinations||[],availability:data.availability||0,images:data.images||[],includedServices:data.includedServices||[]};});}catch(error){console.error('Error fetching packages',error);throw error;}},async getPackageById(id){try{const packageDoc=doc(db,'packages',id);const packageSnapshot=await getDoc(packageDoc);if(!packageSnapshot.exists()){throw new Error('Package not found');}const data=packageSnapshot.data();return{_id:packageSnapshot.id,title:data.title||'',description:data.description||'',price:data.price||0,duration:data.duration||0,destinations:data.destinations||[],availability:data.availability||0,images:data.images||[],includedServices:data.includedServices||[]};}catch(error){console.error('Error fetching package',error);throw error;}},async createPackage(packageData){try{const docRef=await addDoc(collection(db,'packages'),{title:packageData.title,description:packageData.description,price:packageData.price,duration:packageData.duration,destinations:packageData.destinations,availability:packageData.availability,images:packageData.images,includedServices:packageData.includedServices});return docRef.id;}catch(error){console.error('Error creating package',error);throw error;}}};","map":{"version":3,"names":["collection","addDoc","getDocs","doc","getDoc","query","where","db","packageService","getAllPackages","filters","packagesCollection","q","minPrice","undefined","maxPrice","destination","packagesSnapshot","docs","map","docSnapshot","data","_id","id","title","description","price","duration","destinations","availability","images","includedServices","error","console","getPackageById","packageDoc","packageSnapshot","exists","Error","createPackage","packageData","docRef"],"sources":["C:/Users/pampam/TravelNest/TravelNest/frontend/src/components/Packages/PackageList.tsx"],"sourcesContent":["import { \r\n  collection, \r\n  addDoc, \r\n  getDocs, \r\n  doc, \r\n  getDoc,\r\n  query,\r\n  where\r\n} from 'firebase/firestore';\r\nimport { db } from '../../firebaseConfig';\r\nimport { Package } from '../../types/Package';\r\n\r\ninterface PackageFilters {\r\n  minPrice?: number;\r\n  maxPrice?: number;\r\n  destination?: string;\r\n}\r\n\r\nexport const packageService = {\r\n  async getAllPackages(filters?: PackageFilters): Promise<Package[]> {\r\n    try {\r\n      const packagesCollection = collection(db, 'packages');\r\n      \r\n      // Build query based on filters\r\n      let q = query(packagesCollection);\r\n      \r\n      if (filters) {\r\n        if (filters.minPrice !== undefined) {\r\n          q = query(q, where('price', '>=', filters.minPrice));\r\n        }\r\n        \r\n        if (filters.maxPrice !== undefined) {\r\n          q = query(q, where('price', '<=', filters.maxPrice));\r\n        }\r\n        \r\n        if (filters.destination) {\r\n          q = query(q, where('destinations', 'array-contains', filters.destination));\r\n        }\r\n      }\r\n\r\n      const packagesSnapshot = await getDocs(q);\r\n      \r\n      return packagesSnapshot.docs.map(docSnapshot => {\r\n        const data = docSnapshot.data();\r\n        return {\r\n          _id: docSnapshot.id,\r\n          title: data.title || '',\r\n          description: data.description || '',\r\n          price: data.price || 0,\r\n          duration: data.duration || 0,\r\n          destinations: data.destinations || [],\r\n          availability: data.availability || 0,\r\n          images: data.images || [],\r\n          includedServices: data.includedServices || []\r\n        } as Package;\r\n      });\r\n    } catch (error) {\r\n      console.error('Error fetching packages', error);\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  async getPackageById(id: string): Promise<Package> {\r\n    try {\r\n      const packageDoc = doc(db, 'packages', id);\r\n      const packageSnapshot = await getDoc(packageDoc);\r\n      \r\n      if (!packageSnapshot.exists()) {\r\n        throw new Error('Package not found');\r\n      }\r\n\r\n      const data = packageSnapshot.data();\r\n      return {\r\n        _id: packageSnapshot.id,\r\n        title: data.title || '',\r\n        description: data.description || '',\r\n        price: data.price || 0,\r\n        duration: data.duration || 0,\r\n        destinations: data.destinations || [],\r\n        availability: data.availability || 0,\r\n        images: data.images || [],\r\n        includedServices: data.includedServices || []\r\n      } as Package;\r\n    } catch (error) {\r\n      console.error('Error fetching package', error);\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  async createPackage(packageData: Package): Promise<string> {\r\n    try {\r\n      const docRef = await addDoc(collection(db, 'packages'), {\r\n        title: packageData.title,\r\n        description: packageData.description,\r\n        price: packageData.price,\r\n        duration: packageData.duration,\r\n        destinations: packageData.destinations,\r\n        availability: packageData.availability,\r\n        images: packageData.images,\r\n        includedServices: packageData.includedServices\r\n      });\r\n      return docRef.id;\r\n    } catch (error) {\r\n      console.error('Error creating package', error);\r\n      throw error;\r\n    }\r\n  }\r\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}