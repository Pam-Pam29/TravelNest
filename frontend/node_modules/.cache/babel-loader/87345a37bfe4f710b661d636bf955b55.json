{"ast":null,"code":"// src/components/Dashboard/UserDashboard.tsx\nimport React,{useState,useEffect}from'react';import{useAuth}from'../../contexts/AuthContext';import{bookingService}from'../../services/bookingService';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const UserDashboard=()=>{const{user,logout}=useAuth();const[bookings,setBookings]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState('');useEffect(()=>{fetchBookings();},[]);const fetchBookings=async()=>{try{const userBookings=await bookingService.getUserBookings();setBookings(userBookings);setLoading(false);}catch(err){setError('Failed to fetch bookings');setLoading(false);console.error(err);}};const handleCancelBooking=async bookingId=>{try{await bookingService.cancelBooking(bookingId);// Refresh bookings after cancellation\nfetchBookings();}catch(err){setError('Failed to cancel booking');console.error(err);}};if(loading)return/*#__PURE__*/_jsx(\"div\",{className:\"text-center py-10\",children:\"Loading dashboard...\"});return/*#__PURE__*/_jsxs(\"div\",{className:\"container mx-auto px-4 py-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-8\",children:[/*#__PURE__*/_jsxs(\"h1\",{className:\"text-3xl font-bold\",children:[\"Welcome, \",(user===null||user===void 0?void 0:user.firstName)||'Traveler']}),/*#__PURE__*/_jsx(\"button\",{onClick:logout,className:\"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600\",children:\"Logout\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-semibold mb-4\",children:\"Your Bookings\"}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"text-red-500 mb-4\",children:error}),bookings.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"text-center text-gray-500 py-6\",children:[\"You have no bookings yet.\",/*#__PURE__*/_jsx(\"a\",{href:\"/packages\",className:\"text-blue-500 ml-2 hover:underline\",children:\"Explore Packages\"})]}):/*#__PURE__*/_jsx(\"div\",{className:\"space-y-4\",children:bookings.map(booking=>/*#__PURE__*/_jsxs(\"div\",{className:\"border rounded-lg p-4 flex justify-between items-center\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-semibold\",children:booking.package.title}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-600\",children:[\"Travel Date: \",new Date(booking.travelDate).toLocaleDateString()]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"Status:\"}),' ',/*#__PURE__*/_jsx(\"span\",{className:`\n                      ${booking.status==='Cancelled'?'text-red-500':'text-green-500'}\n                    `,children:booking.status})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"font-bold text-blue-600\",children:[\"$\",booking.totalPrice.toFixed(2)]}),booking.status!=='Cancelled'&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleCancelBooking(booking._id),className:\"bg-red-500 text-white px-3 py-1 rounded hover:bg-red-600\",children:\"Cancel Booking\"})]})]},booking._id))})]})]});};export default UserDashboard;","map":{"version":3,"names":["React","useState","useEffect","useAuth","bookingService","jsx","_jsx","jsxs","_jsxs","UserDashboard","user","logout","bookings","setBookings","loading","setLoading","error","setError","fetchBookings","userBookings","getUserBookings","err","console","handleCancelBooking","bookingId","cancelBooking","className","children","firstName","onClick","length","href","map","booking","package","title","Date","travelDate","toLocaleDateString","status","totalPrice","toFixed","_id"],"sources":["C:/Users/pampam/TravelNest/TravelNest/frontend/src/components/Dashboard/UserDashboard.tsx"],"sourcesContent":["// src/components/Dashboard/UserDashboard.tsx\r\nimport React, { useState, useEffect } from 'react';\r\nimport { useAuth } from '../../contexts/AuthContext';\r\nimport { bookingService } from '../../services/bookingService';\r\nimport { Booking } from '../../types/Booking';\r\n\r\nconst UserDashboard: React.FC = () => {\r\n  const { user, logout } = useAuth();\r\n  const [bookings, setBookings] = useState<Booking[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState('');\r\n\r\n  useEffect(() => {\r\n    fetchBookings();\r\n  }, []);\r\n\r\n  const fetchBookings = async () => {\r\n    try {\r\n      const userBookings = await bookingService.getUserBookings();\r\n      setBookings(userBookings);\r\n      setLoading(false);\r\n    } catch (err) {\r\n      setError('Failed to fetch bookings');\r\n      setLoading(false);\r\n      console.error(err);\r\n    }\r\n  };\r\n\r\n  const handleCancelBooking = async (bookingId: string) => {\r\n    try {\r\n      await bookingService.cancelBooking(bookingId);\r\n      // Refresh bookings after cancellation\r\n      fetchBookings();\r\n    } catch (err) {\r\n      setError('Failed to cancel booking');\r\n      console.error(err);\r\n    }\r\n  };\r\n\r\n  if (loading) return <div className=\"text-center py-10\">Loading dashboard...</div>;\r\n\r\n  return (\r\n    <div className=\"container mx-auto px-4 py-8\">\r\n      <div className=\"flex justify-between items-center mb-8\">\r\n        <h1 className=\"text-3xl font-bold\">Welcome, {user?.firstName || 'Traveler'}</h1>\r\n        <button \r\n          onClick={logout}\r\n          className=\"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600\"\r\n        >\r\n          Logout\r\n        </button>\r\n      </div>\r\n\r\n      <div>\r\n        <h2 className=\"text-2xl font-semibold mb-4\">Your Bookings</h2>\r\n        \r\n        {error && <div className=\"text-red-500 mb-4\">{error}</div>}\r\n\r\n        {bookings.length === 0 ? (\r\n          <div className=\"text-center text-gray-500 py-6\">\r\n            You have no bookings yet. \r\n            <a href=\"/packages\" className=\"text-blue-500 ml-2 hover:underline\">\r\n              Explore Packages\r\n            </a>\r\n          </div>\r\n        ) : (\r\n          <div className=\"space-y-4\">\r\n            {bookings.map((booking) => (\r\n              <div \r\n                key={booking._id} \r\n                className=\"border rounded-lg p-4 flex justify-between items-center\"\r\n              >\r\n                <div>\r\n                  <h3 className=\"text-xl font-semibold\">\r\n                    {booking.package.title}\r\n                  </h3>\r\n                  <p className=\"text-gray-600\">\r\n                    Travel Date: {new Date(booking.travelDate).toLocaleDateString()}\r\n                  </p>\r\n                  <p>\r\n                    <span className=\"font-medium\">Status:</span>{' '}\r\n                    <span className={`\r\n                      ${booking.status === 'Cancelled' ? 'text-red-500' : 'text-green-500'}\r\n                    `}>\r\n                      {booking.status}\r\n                    </span>\r\n                  </p>\r\n                </div>\r\n                <div className=\"flex items-center space-x-4\">\r\n                  <span className=\"font-bold text-blue-600\">\r\n                    ${booking.totalPrice.toFixed(2)}\r\n                  </span>\r\n                  {booking.status !== 'Cancelled' && (\r\n                    <button \r\n                      onClick={() => handleCancelBooking(booking._id)}\r\n                      className=\"bg-red-500 text-white px-3 py-1 rounded hover:bg-red-600\"\r\n                    >\r\n                      Cancel Booking\r\n                    </button>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default UserDashboard;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}